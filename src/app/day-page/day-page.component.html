<div class="page w-100">
  @if(addingWorkout){
  <app-addworkout />
  }
  <div>
    <div class="datebar">
      <p class="date">Date: {{ selectedDate | date : "mediumDate" }}</p>
      <button class="todaybtn" (click)="setDateToday()">Today</button>
    </div>
    <div class="holder">
      <app-calendar
        (selectedDayChange)="changeDate($event)"
        [(selectedDay)]="selectedDate"
        [exerciseData]="dataMap"
      ></app-calendar>
    </div>
  </div>
  @if(isLoadingData){
  <h3 class="loadingtext">Loading Data</h3>
  }
  <div class="btncontainer">
    <button class="addworkout" (click)="addingWorkout = true">
      Add Workout
    </button>
  </div>
  <div class="etable">
    <table class="exercisetable">
      <thead>
        <th>Exercise Name</th>
        <th>Muscle Group</th>
        <th>Sets</th>
        <th>Volume</th>
      </thead>

      @for(exerciseSet of setsOfCurrentDay(); track exerciseSet){
      <tr>
        <td>{{ exerciseSet.exercise.name }}</td>
        <td>{{ getNameOfMuscleGroup(exerciseSet.exercise.muscleGroup) }}</td>
        <td>
          @for( set of exerciseSet.sets; track set){
          <div class="setsCell">
            Reps: {{ set.numOfReps }}, Weight {{ set.weight }}
          </div>
          }
        </td>
        <td>{{ exerciseSet.totalVolume | weightUnit : userUnits }}</td>
      </tr>
      } @empty {
      <tr>
        <td>No exercises for this day.</td>
      </tr>
      }
    </table>
  </div>
</div>
